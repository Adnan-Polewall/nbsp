#
# $Id$
#
@include@ @q@../Makefile.inc@q@

PROGNAME1 =	@PROGNAME1@
PROGNAME2 =	@PROGNAME2@

SRC1 =		${TCLUPPERAIR_DIR}/src/dc/fm35dc.tcl
SRC2 =		${TCLUPPERAIR_DIR}/src/dc/uatocsv.tcl
TARGET1 =	${PROGNAME1}
TARGET2 =	${PROGNAME2}

TARGET =	${TARGET1} ${TARGET2}

TCLUPPERAIR_DIR = tclupperair
TCLUPPERAIR_LIB = ${TCLUPPERAIR_DIR}/src/lib/fm35.tcl
TCLUPPERAIR_PKGINDEX = ${TCLUPPERAIR_DIR}/src/lib/pkgIndex.tcl
TCLUPPERAIR_FILES = ${TCLUPPERAIR_LIB} ${TCLUPPERAIR_PKGINDEX}
TCLUPPERAIR_INSTALLDIR = ${MYLIBEXECDIR}/tclupperair

INSTALL =       @INSTALL@
TCLSH =		@TCLSH@

all: ${TARGET}

${TARGET1}: ${SRC1}
	cd ${TCLUPPERAIR_DIR}; ${MAKE}
	sed -e /%TCLUPPERAIR_INSTALLDIR%/s##${TCLUPPERAIR_INSTALLDIR}# \
	-e /%TCLSH%/s##${TCLSH}# ${SRC1} > ${TARGET1}

${TARGET2}: ${SRC2}
	cd ${TCLUPPERAIR_DIR}; ${MAKE}
	sed -e /%TCLUPPERAIR_INSTALLDIR%/s##${TCLUPPERAIR_INSTALLDIR}# \
	-e /%TCLSH%/s##${TCLSH}# ${SRC2} > ${TARGET2}

install: all
	${INSTALL} -m 644 ${TCLUPPERAIR_FILES} ${TCLUPPERAIR_INSTALLDIR}
	${INSTALL} -m 755 ${TARGET} ${BINDIR}

clean:
	cd ${TCLUPPERAIR_DIR}; ${MAKE} clean
	rm -f *~ Makefile ${TARGET}
