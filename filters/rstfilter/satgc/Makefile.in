#
# Copyright (c) 2005 Jose F. Nieves <nieves@ltp.upr.clu.edu>
#
# See LICENSE
#
# $Id$
#
@include@ @q@../../../Makefile.inc@q@

TCLTARGET =	nbspsattif nbspsatgc
TCLSOURCES =	nbspsattif.tcl nbspsatgc.tcl

TMPLSOURCES =	wct_sat_conus.xml map_sat_conus.tmpl
TMPLTARGET =    satgc-templates.tgz
TMPLPDIR =      gismap
TMPLDIR =       ${TMPLPDIR}/sat

SHAREFILES =	geodata-share.tgz

TARGET =	${TCLTARGET} ${TMPLTARGET}

TCLSH =		@TCLSH@
INSTALL =	@INSTALL@

all: ${TARGET}

nbspsattif: nbspsattif.tcl
	sed -e /%TCLSH%/s##${TCLSH}# nbspsattif.tcl > nbspsattif

nbspsatgc: nbspsatgc.tcl
	sed -e /%TCLSH%/s##${TCLSH}# nbspsatgc.tcl > nbspsatgc

${TMPLTARGET}: ${TMPLSOURCES}
	rm -rf ${TMPLDIR}
	mkdir -p ${TMPLDIR}
	cp ${TMPLSOURCES} ${TMPLDIR}
	tar -czf ${TMPLTARGET} ${TMPLDIR}

install: ${TARGET}
	${INSTALL} -m 755 ${TCLTARGET} ${BINDIR}
	${INSTALL} -m 644 ${TMPLTARGET} ${MYCONFDIR}
	${INSTALL} -m 644 ${SHAREFILES} ${MYSHAREDIR}

clean:
	rm -f *~ Makefile ${TARGET}
	rm -rf ${TMPLPDIR}
