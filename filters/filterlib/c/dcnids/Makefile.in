#
# Copyright (c) 2005-2007 Jose F. Nieves <nieves@ltp.upr.clu.edu>
#
# See LICENSE
#
# $Id$
#
DCSOURCES = dcnids_extract.c dcnid_header.c dcnids_name.c dcnids_transform.c \
	dcnids_shp.c dcnids_csv.c dcnids_dbf.c dcnids_info.c dcnids_bunz.c \
	dcnids_decode_radials_af1f.c dcnids_decode_digital_radials_16.c \
	dbfread.c dbfwrite.c \
	nbspradinfo.c nbspnidsshp.c
DCHEADERS = dcnids.h dcnids_extract.h dcnids_header.h dcnids_info.h \
	dcnids_name.h dcnids_shp.h

DCOBJECTS = dcnids_extract.o dcnids_header.o dcnids_name.o dcnids_transform.o \
	dcnids_decode_radials_af1f.o dcnids_decode_digital_radials_16.o \
	dcnids_shp.o dcnids_csv.o dcnids_dbf.o dcnids_info.o dcnids_bunz.o

SHAREDSOURCES = err.c io.c misc.c util.c
SHAREDHEADERS = ../const.h \
	../err.h ../io.h ../misc.h ../util.h
SHAREDOBJECTS = err.o io.o misc.o util.o

HEADERS = ${DCHEADERS} ${SHAREDHEADERS}

COMMONOBJECTS = ${DCOBJECTS} ${SHAREDOBJECTS}
ALLOBJECTS = ${COMMONOBJECTS} dbfread.o dbfwrite.o \
	nbspradinfo.o nbspnidsshp.o

# TARGET = nbspradinfo nbspnidsshp nbspnidsshp-dbfread nbspnidsshp-dbfwrite
TARGET = nbspradinfo nbspnidsshp nbspnidsshp-dbfread

INCDIRS =       @INCDIRS@
LIBDIRS =       @LIBDIRS@
LIBS =          @LIBS@ -lbz2
INSTALL =       @INSTALL@
CC =		@CC@
CCWFLAGS =	@CCWFLAGS@

INCDIRS +=	-iquote ..

CFLAGS +=	${DEBUGFLAGS} -c ${CCWFLAGS} ${INCDIRS}
DEBUGFLAGS =	-g
#DEBUGFLAGS =	-DNDEBUG
LDFLAGS +=	${LIBDIRS} ${LIBS}

all: ${TARGET}

@SUFFIXRULES@ ${HEADERS}
	${CC} ${CFLAGS} $<

../common.h:
	cd ..; ${MAKE} common.h

err.c: ../err.c
	cp ../err.c .

io.c: ../io.c
	cp ../io.c .

misc.c: ../misc.c
	cp ../misc.c .

util.c: ../util.c
	cp ../util.c .

nbspradinfo: nbspradinfo.o ${COMMONOBJECTS}
	${CC} -o nbspradinfo nbspradinfo.o ${COMMONOBJECTS} ${LDFLAGS}

nbspnidsshp: nbspnidsshp.o ${COMMONOBJECTS}
	${CC} -o nbspnidsshp nbspnidsshp.o ${COMMONOBJECTS} ${LDFLAGS}

nbspnidsshp-dbfwrite: dbfwrite.o ${COMMONOBJECTS}
	${CC} -o nbspnidsshp-dbfwrite dbfwrite.o ${COMMONOBJECTS} ${LDFLAGS}

nbspnidsshp-dbfread: dbfread.o ${COMMONOBJECTS}
	${CC} -o nbspnidsshp-dbfread dbfread.o ${COMMONOBJECTS} ${LDFLAGS}

clean:
	rm -f *~ Makefile ${TARGET} ${ALLOBJECTS} ${SHAREDSOURCES}
