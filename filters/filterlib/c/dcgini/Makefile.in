#
# Copyright (c) 2005-2007 Jose F. Nieves <nieves@ltp.upr.clu.edu>
#
# See LICENSE
#
# $Id$
#
DCSOURCES = dcgini_misc.c dcgini_name.c dcgini_pdb.c \
	dcgini_transform.c dcgini_util.c \
	dcgini_asc.c dcgini_shp.c dcgini_dbf.c dcgini_csv.c dcgini_info.c
DCHEADERS = dcgini.h dcgini_const.h dcgini_grid.h dcgini_projections.h \
	dcgini_misc.h dcgini_name.h dcgini_pdb.h dcgini_shp.h \
	dcgini_transform.h dcgini_transform_priv.h dcgini_util.h
DCOBJECTS = dcgini_misc.o dcgini_name.o dcgini_pdb.o \
	dcgini_transform.o dcgini_util.o \
	dcgini_asc.o dcgini_shp.o dcgini_dbf.o dcgini_csv.o dcgini_info.o

SHAREDSOURCES = err.c io.c misc.c unz.c util.c
SHAREDHEADERS = ../const.h \
	../err.h ../io.h ../misc.h ../unz.h ../util.h
SHAREDOBJECTS = err.o io.o misc.o unz.o util.o

HEADERS = ${DCHEADERS} ${SHAREDHEADERS}

COMMONOBJECTS = ${SHAREDOBJECTS} ${DCOBJECTS}
ALLOBJECTS = ${COMMONOBJECTS} nbspsat.o nbspsatinfo.o nbspginishp.o

TARGET = nbspsat nbspsatinfo nbspginishp

INCDIRS =       @INCDIRS@
LIBDIRS =       @LIBDIRS@
LIBS =          @LIBS@
INSTALL =       @INSTALL@
CC =		@CC@
CCWFLAGS =	@CCWFLAGS@

INCDIRS +=	-iquote ..

CFLAGS +=	${DEBUGFLAGS} -c ${CCWFLAGS} ${INCDIRS}
DEBUGFLAGS =	-g
#DEBUGFLAGS =	-DNDEBUG
LDFLAGS +=	${LIBDIRS} ${LIBS}

all: ${TARGET}

@SUFFIXRULES@ ${HEADERS}
	${CC} ${CFLAGS} $<

../common.h:
	cd ..; ${MAKE} common.h

err.c: ../err.c
	cp ../err.c .

io.c: ../io.c
	cp ../io.c .

misc.c: ../misc.c
	cp ../misc.c .

util.c: ../util.c
	cp ../util.c .

unz.c: ../unz.c
	cp ../unz.c .

nbspsat: nbspsat.o ${COMMONOBJECTS}
	${CC} -o nbspsat nbspsat.o ${COMMONOBJECTS} ${LDFLAGS}

nbspsatinfo: nbspsatinfo.o ${COMMONOBJECTS}
	${CC} -o nbspsatinfo nbspsatinfo.o ${COMMONOBJECTS} ${LDFLAGS}

nbspginishp: nbspginishp.o ${COMMONOBJECTS}
	${CC} -o nbspginishp nbspginishp.o ${COMMONOBJECTS} ${LDFLAGS}

clean:
	rm -f *~ Makefile ${TARGET} ${ALLOBJECTS} ${SHAREDSOURCES}
